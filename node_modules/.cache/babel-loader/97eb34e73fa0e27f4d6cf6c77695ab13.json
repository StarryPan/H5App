{"ast":null,"code":"import\"antd-mobile/es/wing-blank/style\";import _WingBlank from\"antd-mobile/es/wing-blank\";import\"antd-mobile/es/flex/style\";import _Flex from\"antd-mobile/es/flex\";import\"antd-mobile/es/modal/style\";import _Modal from\"antd-mobile/es/modal\";import _classCallCheck from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * @file 签到有礼页面\n */import React from'react';import'./style.less';import YunImg from'../../images/yun.png';import GiftImg from'../../images/signin/gift.png';import BannerImg from'../../images/signin/banner.png';import ResultYunImg from'../../images/signin/result-yun.png';import{getFetch}from'../../service/request';import API from'../../service/api';import{openURL}from\"../../common/bridge\";var WalletDetail=/*#__PURE__*/function(_React$Component){_inherits(WalletDetail,_React$Component);var _super=_createSuper(WalletDetail);function WalletDetail(props){var _this;_classCallCheck(this,WalletDetail);_this=_super.call(this,props);_this.alert=function(message){_Modal.alert('',message,[{text:'确定'}]);};_this.state={modal:false,isSign:false,index:0,rewards:[],name:'',num:'',type:'',gift:''};return _this;}_createClass(WalletDetail,[{key:\"componentDidMount\",value:function componentDidMount(){this.getSignList();}},{key:\"onShowModal\",value:function onShowModal(){this.setState({modal:true});}},{key:\"onCloseModal\",value:function onCloseModal(){this.setState({modal:false});}},{key:\"getSignList\",value:function getSignList(){var _this2=this;getFetch(API.getSignList).then(function(res){_this2.setState({isSign:res.isSign,index:res.index-1,rewards:res.rewards});}).catch(function(err){});}},{key:\"sign\",value:function sign(){var _this3=this;if(this.state.isSign)return;getFetch(API.signin).then(function(res){_this3.setState({name:res.gift.name,num:res.gift.num,type:res.type,gift:res.gift});_this3.onShowModal();_this3.getSignList();}).catch(function(err){_this3.alert(err.message);});}},{key:\"openSessionList\",value:function openSessionList(){openURL(\"r_message\");}},{key:\"render\",value:function render(){var _this$state=this.state,index=_this$state.index,isSign=_this$state.isSign,rewards=_this$state.rewards;return/*#__PURE__*/React.createElement(\"div\",{className:\"siginin-view\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head\"},/*#__PURE__*/React.createElement(\"img\",{src:BannerImg,alt:\"\"})),/*#__PURE__*/React.createElement(_WingBlank,{size:\"md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u6BCF\\u65E5\\u7B7E\\u5230\"),/*#__PURE__*/React.createElement(\"div\",{className:\"check\"},/*#__PURE__*/React.createElement(_Flex,null,[0,1,2].map(function(item,idx){if(rewards.length>item){if(index>item){var active=true;return/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(active?'active':''),key:idx},/*#__PURE__*/React.createElement(\"img\",{src:rewards[item]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[item]||'礼包',/*#__PURE__*/React.createElement(\"p\",null,idx+1,\"\\u5929\"),active&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"));}else if(index===item){var _active=true;return/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(_active?'active':''),key:idx},/*#__PURE__*/React.createElement(\"img\",{src:rewards[item]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[item]||'礼包',/*#__PURE__*/React.createElement(\"p\",null,idx+1,\"\\u5929\"),_active&&isSign&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"));}else{var _active2=false;return/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(_active2?'active':''),key:idx},/*#__PURE__*/React.createElement(\"img\",{src:rewards[item]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[item]||'礼包',/*#__PURE__*/React.createElement(\"p\",null,idx+1,\"\\u5929\"),_active2&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"));}}else{return null;}})),/*#__PURE__*/React.createElement(_Flex,null,[3,4,5].map(function(item,idx){if(rewards.length>item){if(index>item){var active=true;return/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(active?'active':''),key:idx},/*#__PURE__*/React.createElement(\"img\",{src:rewards[item]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[item]||'礼包',/*#__PURE__*/React.createElement(\"p\",null,idx+4,\"\\u5929\"),active&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"));}else if(index===item){var _active3=true;return/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(_active3?'active':''),key:idx},/*#__PURE__*/React.createElement(\"img\",{src:rewards[item]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[item]||'礼包',/*#__PURE__*/React.createElement(\"p\",null,idx+4,\"\\u5929\"),_active3&&isSign&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"));}else{var _active4=false;return/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(_active4?'active':''),key:idx},/*#__PURE__*/React.createElement(\"img\",{src:rewards[item]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[item]||'礼包',/*#__PURE__*/React.createElement(\"p\",null,idx+4,\"\\u5929\"),_active4&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"));}}else{return null;}})),/*#__PURE__*/React.createElement(_Flex,null,/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc item \"+(index===6?'active':'')},/*#__PURE__*/React.createElement(\"img\",{src:rewards[6]?YunImg:GiftImg,alt:\"\"}),\" \",rewards[6]||\"礼包\",/*#__PURE__*/React.createElement(\"p\",null,\"7\\u5929\"),index===6&&isSign&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\u5DF2\\u9886\\u53D6\"))),/*#__PURE__*/React.createElement(\"button\",{onClick:this.sign.bind(this),className:isSign?'disabled':''},isSign?\"已领取\":\"领取奖励\"),/*#__PURE__*/React.createElement(\"div\",{className:\"notice\"},/*#__PURE__*/React.createElement(\"h4\",null,\"\\u5956\\u52B1\\u89C4\\u5219\"),/*#__PURE__*/React.createElement(\"p\",null,\"1\\u3001\\u6BCF\\u65E5\\u7B7E\\u5230\\uFF0C\\u5373\\u53EF\\u83B7\\u5F97\\u5956\\u52B1\\u3002\\u8FDE\\u7EED\\u7B7E\\u5230\\uFF0C\\u53EF\\u5F97\\u66F4\\u591A\\u5956\\u52B1\\u3002\"),/*#__PURE__*/React.createElement(\"p\",null,\" 2\\u3001\\u5982\\u4E2D\\u65AD\\u7B7E\\u5230\\uFF0C\\u9700\\u91CD\\u65B0\\u5F00\\u59CB\\u3002\"))))),/*#__PURE__*/React.createElement(_Modal,{popup:true,visible:this.state.modal,onClose:this.onCloseModal.bind(this),animationType:\"slide-up\"},/*#__PURE__*/React.createElement(\"div\",{className:\"signin-modal\"},/*#__PURE__*/React.createElement(\"img\",{src:ResultYunImg,alt:\"\"}),this.state.type==='NORMAL'&&/*#__PURE__*/React.createElement(\"p\",{className:\"tc\"},\"\\u606D\\u559C\\u83B7\\u5F97\",this.state.gift,\"\\u94BB\\u77F3\\u5956\\u52B1\"),this.state.type==='RANDOM'&&/*#__PURE__*/React.createElement(\"p\",{className:\"tc\"},\"\\u606D\\u559C\\u83B7\\u5F97\",this.state.name,\"x\",this.state.num,\"\\u5956\\u52B1\"),/*#__PURE__*/React.createElement(\"p\",{className:\"snote\"},\"\\u5956\\u52B1\\u5DF2\\u81EA\\u52A8\\u53D1\\u653E\\u81F3\\u94B1\\u5305\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.openSessionList.bind(this)},\"\\u53BB\\u503E\\u804A\"))));}}]);return WalletDetail;}(React.Component);export{WalletDetail as default};","map":null,"metadata":{},"sourceType":"module"}