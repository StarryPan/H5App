{"ast":null,"code":"import\"antd-mobile/es/wing-blank/style\";import _WingBlank from\"antd-mobile/es/wing-blank\";import\"antd-mobile/es/input-item/style\";import _InputItem from\"antd-mobile/es/input-item\";import\"antd-mobile/es/toast/style\";import _Toast from\"antd-mobile/es/toast\";import\"antd-mobile/es/modal/style\";import _Modal from\"antd-mobile/es/modal\";import _classCallCheck from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * @file 帮助中心页面\n */import React from'react';import LoginView from'../../components/LoginView';import{createForm}from'rc-form';// import { getFetch, postFetch } from '../../service/request'\n// import HeaderView from '../../components/HeaderView'\nimport'./style.less';import Util from'../../common/util';import{getFetch,postFetch}from\"../../service/request\";import API from\"../../service/api\";import HelpIconImg from'../../images/help_icon.png';import HeaderView from\"../../components/HeaderView\";var InviteCode=/*#__PURE__*/function(_React$Component){_inherits(InviteCode,_React$Component);var _super=_createSuper(InviteCode);function InviteCode(props){var _this;_classCallCheck(this,InviteCode);_this=_super.call(this,props);_this.alert=function(message){_Modal.alert('',message,[{text:'确定'}]);};_this.submit=function(){if(!Util.isLogin()){_this.setState({showLogin:true});return;}_this.props.form.validateFields(function(error,value){_this.inviteCode(value.code);});};_this.state={tabType:'star',showLogin:false,balance:0,balance_money:0,gift:0,gift_money:0,exchange_cash:0,showNote:false,account:''//提现账号\n};return _this;}_createClass(InviteCode,[{key:\"componentDidMount\",value:function componentDidMount(){// Util.removeUserinfo()\nthis.checkLogin();}},{key:\"checkLogin\",value:function checkLogin(){if(!Util.isLogin()){this.setState({showLogin:true});return;}else{this.getData();}}},{key:\"getData\",value:function getData(){var _this2=this;_Toast.loading();getFetch(API.withdrawalInfo).then(function(res){_this2.setState({balance:res.info.balance,balance_money:res.info.balance_money,gift:res.info.gift,gift_money:res.info.gift_money,exchange_cash:res.info.exchange_cash,account:res.info.account,status:res.info.status});_Toast.hide();}).catch(function(err){_Toast.hide();if(err.code===401){_this2.setState({showLogin:true});}else{_this2.alert(err.message);}});}},{key:\"onBack\",value:function onBack(){_Toast.show('不能再返回了');}},{key:\"inviteCode\",value:function inviteCode(code){var _this3=this;postFetch(API.inviteCode,{code:code}).then(function(res){_this3.alert(\"提交成功, 等待审核...\");// this.getData();\n_this3.props.form.resetFields();}).catch(function(err){_this3.alert(err.message);});}},{key:\"loginClose\",value:function loginClose(){this.setState({showLogin:false});}},{key:\"loginSuccess\",value:function loginSuccess(data){this.setState({showLogin:false});this.getData();}},{key:\"loginFail\",value:function loginFail(err){}},{key:\"showWithdrawNote\",value:function showWithdrawNote(){this.setState({showNote:true});}},{key:\"onCloseNote\",value:function onCloseNote(){this.setState({showNote:false});}},{key:\"render\",value:function render(){var _this$state=this.state,tabType=_this$state.tabType,showLogin=_this$state.showLogin,account=_this$state.account,showNote=_this$state.showNote,status=_this$state.status;var getFieldProps=this.props.form.getFieldProps;var placeholder='请输入邀请人手机号码';return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(_WingBlank,{size:\"lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdraw-view\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inputview\"},/*#__PURE__*/React.createElement(_InputItem,Object.assign({className:\"input border\",type:\"number\"},getFieldProps('code'),{placeholder:placeholder}))),/*#__PURE__*/React.createElement(\"button\",{onClick:this.submit.bind(this)},\"\\u63D0\\u4EA4\")))),/*#__PURE__*/React.createElement(LoginView,{visable:showLogin,onClose:this.loginClose.bind(this),loginSuccess:this.loginSuccess.bind(this),loginFail:this.loginFail.bind(this)}));}}]);return InviteCode;}(React.Component);export default createForm()(InviteCode);","map":null,"metadata":{},"sourceType":"module"}