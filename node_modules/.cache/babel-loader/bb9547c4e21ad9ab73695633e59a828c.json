{"ast":null,"code":"import\"antd-mobile/es/toast/style\";import _Toast from\"antd-mobile/es/toast\";import\"antd-mobile/es/modal/style\";import _Modal from\"antd-mobile/es/modal\";import _classCallCheck from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * @file 视频聊价\n */import React from'react';// import HeaderView from '../../components/HeaderView'\nimport{getFetch,postFetch}from'../../service/request';import{openURL}from\"../../common/bridge\";import API from'../../service/api';import ProgressView from'../../components/Process';import'./style.less';import RightPng from'../../images/right.png';var Video=/*#__PURE__*/function(_React$Component){_inherits(Video,_React$Component);var _super=_createSuper(Video);function Video(props){var _this;_classCallCheck(this,Video);_this=_super.call(this,props);_this.alert=function(message){_Modal.alert('',message,[{text:'确定'}]);};_this.changeToEdit=function(){_this.setState({editFlag:true});};_this.confirmEdit=function(value){_Toast.loading();postFetch(API.updatePrice,{price:value[0]}).then(function(res){_Toast.hide();_Toast.show('修改成功');// 修改成功重新获取数据\n_this.getData();}).catch(function(err){_Toast.hide();_this.alert(err.message);});};_this.changeToSubteact=function(){var price=_this.state.price;if(price==='--')price=0;_this.setState({price:price-50>0?price-50:0});};_this.changeToAdd=function(){var price=_this.state.price;if(price==='--')price=0;_this.setState({price:price+50});};_this.state={price:'--',duration:0,LastWeekDuration:0,videoCert:true,//是否认证\neditFlag:false};return _this;}_createClass(Video,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"cert\",value:function cert(){openURL(\"r_video_cert\");}},{key:\"getData\",value:function getData(){var _this2=this;getFetch(API.videoPrice).then(function(data){_this2.setState({price:data.price,duration:data.duration,LastWeekDuration:data.LastWeekDuration,videoCert:data.videoCert});}).catch(function(err){_this2.alert(err.message);});}},{key:\"getShowTime\",value:function getShowTime(duration){var hour=0,minute;if(duration>1){hour=parseInt(duration,10);}console.log('getShowTime',+duration.toString().split('.')[1]);minute=Math.floor((duration-hour)*60);return hour?\"\".concat(hour,\"\\u5C0F\\u65F6\").concat(minute,\"\\u5206\\u949F\"):\"\".concat(minute,\"\\u5206\\u949F\");}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,price=_this$state.price,duration=_this$state.duration,videoCert=_this$state.videoCert,LastWeekDuration=_this$state.LastWeekDuration;return/*#__PURE__*/React.createElement(\"div\",{className:\"video-view\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tc\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tc five\"},\"5\\u5C0F\\u65F6\"),/*#__PURE__*/React.createElement(\"span\",{className:\"zero\"},\"0\\u5C0F\\u65F6\"),/*#__PURE__*/React.createElement(ProgressView,{score:duration*10,price:price,change:function change(value){_this3.confirmEdit(value);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"ten\"},\"10\\u5C0F\\u65F6\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"time tc\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u672C\\u5468\\u7D2F\\u8BA1\\u89C6\\u9891\\u65F6\\u957F\\uFF1A\",/*#__PURE__*/React.createElement(\"strong\",null,this.getShowTime(duration)))),/*#__PURE__*/React.createElement(\"p\",{className:\"tips\"},\"* \\u8D8A\\u9AD8\\u7684\\u804A\\u4EF7\\u7537\\u751F\\u53EF\\u80FD\\u4E0D\\u613F\\u610F\\u63A5\\u542C\\u54E6\\uFF5E\"),/*#__PURE__*/React.createElement(\"div\",{className:\"content-new\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tc\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tit\"},\"\\xB7\\u89C6\\u9891\\u804A\\u5929\\u52A0\\u4EF7\\u7279\\u6743\\xB7\")),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"\\u672C\\u5468\\u7D2F\\u8BA1\\u89C6\\u9891\\u804A\\u5929\\u65F6\\u957F\\u22650.5\\u5C0F\\u65F6\\u7684\\u5973\\u751F\\uFF0C\\u53EF\\u83B7\\u5F97\\u52A0\\u4EF7\\u7279\\u6743\\u3002\",!videoCert&&/*#__PURE__*/React.createElement(\"span\",{onClick:this.cert.bind(this)},\"\\u6211\\u8981\\u8BA4\\u8BC1 \",/*#__PURE__*/React.createElement(\"img\",{src:RightPng,alt:\"\"}))),/*#__PURE__*/React.createElement(\"li\",null,\"\\u6839\\u636E\\u6BCF\\u5468\\u7D2F\\u8BA1\\u89C6\\u9891\\u65F6\\u957F\\uFF0C\\u53EF\\u4EE5\\u5728\\u7B2C\\u4E8C\\u5929\\u4FEE\\u6539\\u52A0\\u4EF7\\u7684\\u5E45\\u5EA6\\uFF1A\",/*#__PURE__*/React.createElement(\"div\",null,\"\\u7D2F\\u8BA1\\u65F6\\u957F\\u22650.5\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF7400\\u79EF\\u5206/\\u5206\\u949F \",/*#__PURE__*/React.createElement(\"br\",null),\"\\xA0\\xA0\\u7D2F\\u8BA1\\u65F6\\u957F\\u22651\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF7800\\u79EF\\u5206/\\u5206\\u949F \",/*#__PURE__*/React.createElement(\"br\",null),\"\\xA0\\xA0\\u7D2F\\u8BA1\\u65F6\\u957F\\u22652\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF71200\\u79EF\\u5206/\\u5206\\u949F \",/*#__PURE__*/React.createElement(\"br\",null),\"\\xA0\\xA0\\u7D2F\\u8BA1\\u65F6\\u957F\\u22654\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF72000\\u79EF\\u5206/\\u5206\\u949F \",/*#__PURE__*/React.createElement(\"br\",null),\"\\xA0\\xA0\\u7D2F\\u8BA1\\u65F6\\u957F\\u22656\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF72800\\u79EF\\u5206/\\u5206\\u949F \",/*#__PURE__*/React.createElement(\"br\",null),\"\\xA0\\xA0\\u7D2F\\u8BA1\\u65F6\\u957F\\u22658\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF73600\\u79EF\\u5206/\\u5206\\u949F \",/*#__PURE__*/React.createElement(\"br\",null),\"\\xA0\\u7D2F\\u8BA1\\u65F6\\u957F\\u226510\\u5C0F\\u65F6\\xA0\\xA0\\xA0\\u52A0\\u4EF74800\\u79EF\\u5206/\\u5206\\u949F\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"\\u5982\\u4F55\\u7EF4\\u6301\\u6700\\u9AD8\\u79EF\\u5206\\u6863\\u4F4D\\uFF1F\"),/*#__PURE__*/React.createElement(\"p\",null,\"\\u6839\\u636E\\u4E0A\\u5468\\u7684\\u7D2F\\u8BA1\\u89C6\\u9891\\u65F6\\u957F\\u51B3\\u5B9A\\u672C\\u5468\\u7684\\u6700\\u9AD8\\u79EF\\u5206\\u6863\\u4F4D\\uFF1B\\u6BCF\\u5468\\u4E000\\u70B9\\u7CFB\\u7EDF\\u4F1A\\u9ED8\\u8BA4\\u964D\\u81F3\\u7B26\\u5408\\u4E0A\\u5468\\u6761\\u4EF6\\u7684\\u6700\\u9AD8\\u79EF\\u5206\\u6863\\u4F4D\\u3002\"),/*#__PURE__*/React.createElement(\"h4\",null,\"\\u5982\\u4F55\\u53CA\\u65F6\\u8C03\\u4EF7\\uFF1F\"),/*#__PURE__*/React.createElement(\"p\",null,\"\\u672C\\u5468\\u7D2F\\u8BA1\\u89C6\\u9891\\u65F6\\u957F\\u8FBE\\u5230\\u4EFB\\u610F\\u9636\\u6BB5\\uFF0C\\u53EF\\u4E8E\\u6B21\\u65E5\\u4E00\\u70B9\\u8FDB\\u884C\\u8C03\\u4EF7\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"time tc\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u4E0A\\u5468\\u7D2F\\u8BA1\\u89C6\\u9891\\u65F6\\u957F\\uFF1A\",/*#__PURE__*/React.createElement(\"strong\",null,this.getShowTime(LastWeekDuration))))));}}]);return Video;}(React.Component);export{Video as default};","map":null,"metadata":{},"sourceType":"module"}