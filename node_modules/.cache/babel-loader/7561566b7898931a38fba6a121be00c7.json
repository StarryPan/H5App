{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { getAccountInfo, isInApp } from './bridge';\nconst Util = {\n  isLogin: async () => {\n    if (isInApp()) {\n      const token = await getAccountInfo();\n      if (token) {\n        return true;\n      }\n    }\n    const token = Cookies.get(\"token\");\n    const uid = Cookies.get(\"userId\");\n    return !!(token && uid);\n  },\n  async getToken() {\n    if (isInApp()) {\n      const token = await getAccountInfo();\n      if (token) {\n        return token;\n      }\n    }\n    const token = Cookies.get(\"token\");\n    const uid = Cookies.get(\"userId\");\n    return {\n      token,\n      uid\n    };\n  },\n  removeUserinfo() {\n    Cookies.remove('token');\n    Cookies.remove('userId');\n  },\n  setLoginCookie(data) {\n    Cookies.set(\"token\", data.token, {\n      expires: 7\n    });\n    Cookies.set(\"userId\", data.id, {\n      expires: 7\n    });\n  },\n  isPhoneNumber(phone) {\n    if (!/^1[3456789]\\d{9}$/.test(phone)) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  getQueryParams(name) {\n    var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\"),\n      url = window.location.href;\n    const search = window.location.search ? window.location.search.split('?')[1] : url.split('?')[1];\n    if (!search) {\n      return '';\n    }\n    var r = search.match(reg);\n    if (r != null) return unescape(decodeURI(r[2]));\n    return null;\n  },\n  priceFormat(num, needAddIcon) {\n    const prefix = needAddIcon ? \"+\" : \"\";\n    if (num === '--') return prefix + num;\n    if (!num) return prefix + '0.0';\n    var c = num.toString().indexOf('.') !== -1 ? num.toLocaleString() : num.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,');\n    return prefix + (c || \"0.0\");\n  },\n  copyToClip(text) {\n    const u = navigator.userAgent;\n    const isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端 \n    const isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端 \n    if (isAndroid || !isAndroid && !isiOS) {\n      var txt = document.createElement('textarea');\n      txt.style = 'position:absolute;top:-9999px;left:-9999px;';\n      txt.setAttribute('id', \"selector\");\n      txt.setAttribute('readonly', 'readonly');\n      txt.innerHTML = text;\n      document.body.appendChild(txt);\n      txt.select();\n      document.execCommand(\"copy\", false, null);\n    }\n    if (isiOS) {\n      const txt = document.createElement('a');\n      txt.setAttribute('id', \"selector\");\n      txt.setAttribute('style', 'position:absolute;top:-9999px;left:-9999px;');\n      txt.innerHTML = text;\n      document.body.appendChild(txt);\n      const copyDOM = document.querySelectorAll('#selector');\n      const range = document.createRange();\n      range.selectNode(copyDOM[0]);\n      window.getSelection().removeAllRanges();\n      window.getSelection().addRange(range);\n      document.execCommand('copy');\n    }\n    const e_selector = document.getElementById('selector');\n    document.body.removeChild(e_selector);\n  },\n  isYoTaApp() {\n    const domain = window.location.host;\n    return domain.includes('yotajiaoyou');\n  }\n};\nexport default Util;","map":{"version":3,"names":["Cookies","getAccountInfo","isInApp","Util","isLogin","token","get","uid","getToken","removeUserinfo","remove","setLoginCookie","data","set","expires","id","isPhoneNumber","phone","test","getQueryParams","name","reg","RegExp","url","window","location","href","search","split","r","match","unescape","decodeURI","priceFormat","num","needAddIcon","prefix","c","toString","indexOf","toLocaleString","replace","copyToClip","text","u","navigator","userAgent","isAndroid","isiOS","txt","document","createElement","style","setAttribute","innerHTML","body","appendChild","select","execCommand","copyDOM","querySelectorAll","range","createRange","selectNode","getSelection","removeAllRanges","addRange","e_selector","getElementById","removeChild","isYoTaApp","domain","host","includes"],"sources":["/usr/local/var/www/orangeweb/src/common/util.js"],"sourcesContent":["import Cookies from 'js-cookie';\nimport { getAccountInfo, isInApp } from './bridge'\n\nconst Util = {\n    isLogin: async ()=>{\n        if (isInApp()) {\n            const token = await getAccountInfo()\n            if(token) {\n                return true\n            }\n        }\n        const token = Cookies.get(\"token\");\n        const uid = Cookies.get(\"userId\");\n        return !!(token && uid);\n    },\n    async getToken(){\n        if (isInApp()) {\n            const token = await getAccountInfo()\n            if(token) {\n                return token\n            }\n        }\n        const token = Cookies.get(\"token\");\n        const uid = Cookies.get(\"userId\");\n        return {\n            token,\n            uid,\n        };\n    },\n    removeUserinfo(){\n        Cookies.remove('token');\n        Cookies.remove('userId');\n    },\n    setLoginCookie(data){\n        Cookies.set(\"token\", data.token, {expires: 7});\n        Cookies.set(\"userId\", data.id, {expires: 7});\n    },\n    isPhoneNumber(phone){\n        if(!(/^1[3456789]\\d{9}$/.test(phone))){\n            return false; \n        }else{\n            return true;\n        }\n    },\n    getQueryParams(name){\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\"), url = window.location.href;\n        const search = window.location.search ? window.location.search.split('?')[1] : url.split('?')[1];\n        if(!search){\n            return '';\n        }\n        var r = search.match(reg);\n        if (r != null) return unescape(decodeURI(r[2])); return null;\n    },\n    priceFormat(num, needAddIcon) {\n        const prefix = needAddIcon ? \"+\" : \"\";\n        if(num === '--') return prefix + num;\n        if(!num) return prefix + '0.0';\n        var c = (num.toString().indexOf ('.') !== -1) ? num.toLocaleString() : num.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,');\n        return prefix + (c || \"0.0\");\n    },\n    copyToClip(text){\n        const u = navigator.userAgent; \n        const isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端 \n        const isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端 \n        if(isAndroid || (!isAndroid && !isiOS)){\n            var txt = document.createElement('textarea');\n            txt.style = 'position:absolute;top:-9999px;left:-9999px;';\n            txt.setAttribute('id',\"selector\");\n            txt.setAttribute('readonly','readonly');\n            txt.innerHTML = text;\n            document.body.appendChild(txt);\n            txt.select();\n            document.execCommand(\"copy\",false,null);\n        }\n        if(isiOS){\n            const txt = document.createElement('a');\n            txt.setAttribute('id',\"selector\");\n            txt.setAttribute('style','position:absolute;top:-9999px;left:-9999px;');\n            txt.innerHTML = text;\n            document.body.appendChild(txt);\n            const copyDOM = document.querySelectorAll('#selector');\n            const range = document.createRange();  \n            range.selectNode(copyDOM[0]);\n            window.getSelection().removeAllRanges();\n            window.getSelection().addRange(range);\n            document.execCommand('copy'); \n        }\n        const e_selector = document.getElementById('selector');\n        document.body.removeChild(e_selector);\n    },\n    isYoTaApp() {\n        const domain = window.location.host\n        return domain.includes('yotajiaoyou')\n    }\n}\nexport default Util;"],"mappings":"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"},"metadata":{},"sourceType":"module"}