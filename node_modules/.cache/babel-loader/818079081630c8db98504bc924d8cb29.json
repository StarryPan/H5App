{"ast":null,"code":"var _jsxFileName = \"/usr/local/var/www/orangeweb/src/pages/shop/record.js\";\n/**\n * @createdAt 2021-01-17\n * @file 排行榜\n */\nimport React from 'react';\nimport './style.less';\nimport API from '../../service/shopApi';\nimport { postFetch, getFetch } from '../../service/request';\nimport HeaderView from '../../components/HeaderView';\nexport default class ShopRecord extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 1,\n      tabs: [{\n        id: 1,\n        name: '购买'\n      }, {\n        id: 2,\n        name: '赠送'\n      }],\n      standbyData: {\n        id: 1,\n        // 商品ID\n        tag: 2,\n        // 标签ID（0.普通，1.限时特惠，2.新品上架）\n        name: \"炫酷头像框\",\n        cost: 400,\n        // 价格\n        is_give: 0,\n        // 是否可以赠送\n        icon: \"https://miyijiaoyou.oss-cn-beijing.aliyuncs.com/dev/gifts/images/976ab98bd3228db0679b12ed1ad8ab71.webp\"\n      },\n      chooseType: 1,\n      // 1-自己 2-蜜友\n      selectData: null,\n      showSearch: false,\n      searchValue: '',\n      searchResult: '',\n      friend: null,\n      dataList: []\n    };\n  }\n  componentDidMount() {\n    this.getData();\n  }\n  async getData(type) {\n    const getRes = await getFetch(API.buyRecord);\n    if (!getRes) {\n      this.setState({\n        loading: false,\n        dataList: []\n      });\n    } else {\n      this.setState({\n        loading: false,\n        dataList: getRes.map(item => ({\n          name: item.name,\n          targetId: item.target_id,\n          cost: item.cost_num,\n          type: item.cost_key,\n          expday: item.expiration_day,\n          createTime: item.ctime\n        }))\n      });\n    }\n  }\n  changeTab(type) {\n    this.setState({\n      activeTab: type\n    }, () => {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    });\n  }\n  render() {\n    const {\n      activeTab,\n      tabs,\n      dataList,\n      loading\n    } = this.state;\n    const showData = dataList.filter(item => activeTab === 1 ? !item.targetId : !!item.targetId);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shop-index white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(HeaderView, {\n      hideBack: true,\n      title: \"购买记录\",\n      fixed: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inner v2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shop-menu center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, tabs.map(item => {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: item.id,\n        onClick: () => this.changeTab(item.id),\n        className: activeTab === item.id ? 'active' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }\n      }, item.name);\n    })), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, showData.map(item => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"shop-record-item\",\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"f1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ctx\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, item.targetId ? /*#__PURE__*/React.createElement(\"p\", {\n        className: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, \"\\u8D60\\u9001\\u7ED9\", item.targetId, \"-\", item.name) : /*#__PURE__*/React.createElement(\"p\", {\n        className: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"tag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      }, item.expday, \"\\u5929\\u8FC7\\u671F\")), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      }, item.createTime)), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"cost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 19\n        }\n      }, item.cost, /*#__PURE__*/React.createElement(\"i\", {\n        className: item.type,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 53\n        }\n      })));\n    }), !showData.length && !loading && /*#__PURE__*/React.createElement(\"li\", {\n      className: \"shop-empty\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, \"\\u6682\\u65E0\\u4EFB\\u4F55\\u8D2D\\u4E70\\u8BB0\\u5F55\")))));\n  }\n}","map":{"version":3,"names":["React","API","postFetch","getFetch","HeaderView","ShopRecord","Component","constructor","props","state","loading","activeTab","tabs","id","name","standbyData","tag","cost","is_give","icon","chooseType","selectData","showSearch","searchValue","searchResult","friend","dataList","componentDidMount","getData","type","getRes","buyRecord","setState","map","item","targetId","target_id","cost_num","cost_key","expday","expiration_day","createTime","ctime","changeTab","window","scrollTo","top","behavior","render","showData","filter","length"],"sources":["/usr/local/var/www/orangeweb/src/pages/shop/record.js"],"sourcesContent":["/**\n * @createdAt 2021-01-17\n * @file 排行榜\n */\nimport React from 'react'\nimport './style.less'\n\nimport API from '../../service/shopApi';\nimport { postFetch, getFetch } from '../../service/request'\nimport HeaderView from '../../components/HeaderView'\n\nexport default class ShopRecord extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 1,\n      tabs: [{\n        id: 1,\n        name: '购买',\n      },{\n        id: 2,\n        name: '赠送',\n      }],\n      standbyData: {\n        id: 1,// 商品ID\n        tag: 2,// 标签ID（0.普通，1.限时特惠，2.新品上架）\n        name: \"炫酷头像框\",\n        cost: 400,// 价格\n        is_give: 0,// 是否可以赠送\n        icon: \"https://miyijiaoyou.oss-cn-beijing.aliyuncs.com/dev/gifts/images/976ab98bd3228db0679b12ed1ad8ab71.webp\",\n      },\n      chooseType: 1, // 1-自己 2-蜜友\n      selectData: null,\n      showSearch: false,\n      searchValue: '',\n      searchResult: '',\n      friend: null,\n      dataList: [],\n    }\n  }\n  componentDidMount(){\n    this.getData()\n  }\n  async getData(type) {\n    const getRes = await getFetch(API.buyRecord)\n    if (!getRes) {\n      this.setState({\n        loading: false,\n        dataList: []\n      })\n    } else  {\n      this.setState({\n        loading: false,\n        dataList: getRes.map((item) => ({\n          name: item.name,\n          targetId: item.target_id,\n          cost: item.cost_num,\n          type: item.cost_key,\n          expday: item.expiration_day,\n          createTime: item.ctime,\n        }))\n      })\n    }\n  }\n  changeTab(type) {\n    this.setState({\n      activeTab: type,\n    }, () => {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      })\n    })\n  }\n  render(){\n  const { activeTab, tabs, dataList, loading } = this.state\n  const showData = dataList.filter((item) => (activeTab === 1 ? !item.targetId : !!item.targetId))\n    return (\n      <div className='shop-index white'>\n        <HeaderView\n          hideBack={true}\n          title={\"购买记录\"}\n          fixed\n        />\n        <div className='inner v2'>\n          <div className='shop-menu center'>\n            {tabs.map((item) => {\n              return (\n                <span key={item.id} onClick={ () => this.changeTab(item.id) } className={activeTab === item.id ? 'active' : ''}>{item.name}</span>\n              )\n            })}\n          </div>\n          <ul className='content'>\n            { showData.map((item) => {\n              return (  \n                <li className='shop-record-item' key={item.id}>\n                  <div className='f1'>\n                    <div className='ctx'>\n                      {item.targetId ? (\n                        <p className='name'>赠送给{item.targetId}-{item.name}</p>\n                      ) : (\n                        <p className='name'>{item.name}</p>\n                      )}\n                      <p className='tag'>{item.expday}天过期</p>\n                    </div>\n                    <p className='time'>{item.createTime}</p>\n                  </div>\n                  <span className='cost'>{item.cost}<i className={item.type}></i></span>\n                </li> \n              )\n            }) }\n            { !showData.length && !loading && (\n              <li className='shop-empty'>\n                <div className='bg'></div>\n                <p>暂无任何购买记录</p>\n              </li>\n            ) }\n          </ul>\n        </div>\n      </div>\n    )\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}