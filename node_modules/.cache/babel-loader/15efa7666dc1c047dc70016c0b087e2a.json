{"ast":null,"code":"import \"antd-mobile/es/wing-blank/style\";\nimport _WingBlank from \"antd-mobile/es/wing-blank\";\nimport \"antd-mobile/es/input-item/style\";\nimport _InputItem from \"antd-mobile/es/input-item\";\nimport \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport \"antd-mobile/es/modal/style\";\nimport _Modal from \"antd-mobile/es/modal\";\nvar _jsxFileName = \"/usr/local/var/www/orangeweb/src/pages/invite_code/index.js\";\n/**\n * @file 帮助中心页面\n */\nimport React from 'react';\nimport LoginView from '../../components/LoginView';\nimport { createForm } from 'rc-form';\n// import { getFetch, postFetch } from '../../service/request'\n// import HeaderView from '../../components/HeaderView'\nimport './style.less';\nimport Util from '../../common/util';\nimport { getFetch, postFetch } from \"../../service/request\";\nimport API from \"../../service/api\";\nimport HelpIconImg from '../../images/help_icon.png';\nimport HeaderView from \"../../components/HeaderView\";\nclass InviteCode extends React.Component {\n  constructor(props) {\n    super(props);\n    this.alert = message => {\n      _Modal.alert('', message, [{\n        text: '确定'\n      }]);\n    };\n    this.submit = () => {\n      if (!Util.isLogin()) {\n        this.setState({\n          showLogin: true\n        });\n        return;\n      }\n      this.props.form.validateFields((error, value) => {\n        this.inviteCode(value.code);\n      });\n    };\n    this.state = {\n      tabType: 'star',\n      showLogin: false,\n      balance: 0,\n      balance_money: 0,\n      gift: 0,\n      gift_money: 0,\n      exchange_cash: 0,\n      showNote: false,\n      account: '' //提现账号\n    };\n  }\n\n  componentDidMount() {\n    // Util.removeUserinfo()\n    this.checkLogin();\n  }\n  checkLogin() {\n    if (!Util.isLogin()) {\n      this.setState({\n        showLogin: true\n      });\n      return;\n    } else {\n      this.getData();\n    }\n  }\n  getData() {\n    _Toast.loading();\n    getFetch(API.withdrawalInfo).then(res => {\n      this.setState({\n        balance: res.info.balance,\n        balance_money: res.info.balance_money,\n        gift: res.info.gift,\n        gift_money: res.info.gift_money,\n        exchange_cash: res.info.exchange_cash,\n        account: res.info.account,\n        status: res.info.status\n      });\n      _Toast.hide();\n    }).catch(err => {\n      _Toast.hide();\n      if (err.code === 401) {\n        this.setState({\n          showLogin: true\n        });\n      } else {\n        this.alert(err.message);\n      }\n    });\n  }\n  onBack() {\n    _Toast.show('不能再返回了');\n  }\n  inviteCode(code) {\n    postFetch(API.inviteCode, {\n      code: code\n    }).then(res => {\n      this.alert(\"提交成功, 等待审核...\");\n      // this.getData();\n      this.props.form.resetFields();\n    }).catch(err => {\n      this.alert(err.message);\n    });\n  }\n  loginClose() {\n    this.setState({\n      showLogin: false\n    });\n  }\n  loginSuccess(data) {\n    this.setState({\n      showLogin: false\n    });\n    this.getData();\n  }\n  loginFail(err) {}\n  showWithdrawNote() {\n    this.setState({\n      showNote: true\n    });\n  }\n  onCloseNote() {\n    this.setState({\n      showNote: false\n    });\n  }\n  render() {\n    const {\n      tabType,\n      showLogin,\n      account,\n      showNote,\n      status\n    } = this.state;\n    const {\n      getFieldProps\n    } = this.props.form;\n    const placeholder = '请输入邀请人手机号码';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_WingBlank, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"withdraw-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(_InputItem, Object.assign({\n      className: \"input border\",\n      type: \"number\"\n    }, getFieldProps('code'), {\n      placeholder: placeholder,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, \"\\u63D0\\u4EA4\")))), /*#__PURE__*/React.createElement(LoginView, {\n      visable: showLogin,\n      onClose: this.loginClose.bind(this),\n      loginSuccess: this.loginSuccess.bind(this),\n      loginFail: this.loginFail.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nexport default createForm()(InviteCode);","map":{"version":3,"names":["React","LoginView","createForm","Util","getFetch","postFetch","API","HelpIconImg","HeaderView","InviteCode","Component","constructor","props","alert","message","text","submit","isLogin","setState","showLogin","form","validateFields","error","value","inviteCode","code","state","tabType","balance","balance_money","gift","gift_money","exchange_cash","showNote","account","componentDidMount","checkLogin","getData","loading","withdrawalInfo","then","res","info","status","hide","catch","err","onBack","show","resetFields","loginClose","loginSuccess","data","loginFail","showWithdrawNote","onCloseNote","render","getFieldProps","placeholder","bind"],"sources":["/usr/local/var/www/orangeweb/src/pages/invite_code/index.js"],"sourcesContent":["/**\n * @file 帮助中心页面\n */\nimport React from 'react'\nimport {WingBlank, Flex, InputItem, Modal, Toast} from 'antd-mobile'\nimport LoginView from '../../components/LoginView'\nimport { createForm } from 'rc-form'\n// import { getFetch, postFetch } from '../../service/request'\n// import HeaderView from '../../components/HeaderView'\nimport './style.less';\nimport Util from '../../common/util';\nimport {getFetch, postFetch} from \"../../service/request\";\nimport API from \"../../service/api\";\nimport HelpIconImg from '../../images/help_icon.png'\nimport HeaderView from \"../../components/HeaderView\";\nclass InviteCode extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      tabType: 'star',\n      showLogin: false,\n      balance: 0,\n      balance_money: 0,\n      gift: 0,\n      gift_money: 0,\n      exchange_cash: 0,\n      showNote: false,\n      account: '' //提现账号\n    }\n  }\n  componentDidMount(){\n    // Util.removeUserinfo()\n    this.checkLogin()\n  }\n  checkLogin() {\n    if(!Util.isLogin()) {\n      this.setState({\n        showLogin: true\n      })\n      return;\n    } else {\n      this.getData()\n    }\n  }\n  getData() {\n    Toast.loading()\n    getFetch(API.withdrawalInfo).then((res)=>{\n      this.setState({\n        balance: res.info.balance,\n        balance_money: res.info.balance_money,\n        gift: res.info.gift,\n        gift_money: res.info.gift_money,\n        exchange_cash: res.info.exchange_cash,\n        account: res.info.account,\n        status: res.info.status,\n      })\n      Toast.hide()\n    }).catch((err) => {\n      Toast.hide()\n        if(err.code === 401) {\n            this.setState({\n                showLogin: true\n            })\n        } else {\n            this.alert(err.message)\n        }\n    })\n  }\n  alert = (message)=>{\n    Modal.alert('', message,[{\n      text: '确定'\n    }])\n  }\n  onBack() {\n    Toast.show('不能再返回了')\n  }\n  submit = () => {\n    if(!Util.isLogin()) {\n      this.setState({\n        showLogin: true\n      })\n      return;\n    }\n\n    this.props.form.validateFields((error, value) => {\n      this.inviteCode(value.code)\n    });\n  }\n  inviteCode(code) {\n    postFetch(API.inviteCode, {\n      code: code,\n    }).then((res) => {\n      this.alert(\"提交成功, 等待审核...\");\n      // this.getData();\n      this.props.form.resetFields()\n    }).catch((err) => {\n      this.alert(err.message)\n    })\n  }\n  loginClose() {\n    this.setState({\n      showLogin: false\n    })\n  }\n  loginSuccess(data) {\n    this.setState({\n      showLogin: false\n    })\n    this.getData()\n  }\n\n  loginFail(err){\n\n  }\n  showWithdrawNote() {\n    this.setState({\n      showNote: true\n    })\n  }\n  onCloseNote() {\n    this.setState({\n      showNote: false\n    })\n  }\n\trender(){\n    const { tabType, showLogin, account, showNote, status } = this.state\n    const { getFieldProps } = this.props.form;\n    const placeholder = '请输入邀请人手机号码'\n\t\treturn(\n      <div>\n        {/*{status === 1 ? (*/}\n        {/*    <HeaderView*/}\n        {/*        title={\"提现\"}*/}\n        {/*        onBack = {this.onBack.bind(this)}*/}\n        {/*        rightContent = {{*/}\n        {/*          title: '明细',*/}\n        {/*          onClick: () => {*/}\n        {/*            this.gotoWalletDetail()*/}\n        {/*          }*/}\n        {/*        }}*/}\n        {/*        // fixed*/}\n        {/*    />*/}\n        {/*) : (*/}\n        {/*  <HeaderView*/}\n        {/*  title={\"提现\"}*/}\n        {/*  onBack = {this.onBack.bind(this)}*/}\n        {/*  rightContent = {{*/}\n        {/*  title: '绑定',*/}\n        {/*  onClick: () => {*/}\n        {/*  this.gotoBindAlipay()*/}\n        {/*}*/}\n        {/*}}*/}\n        {/*  // fixed*/}\n        {/*  />*/}\n        {/*  )}*/}\n\n        {/*{status === 1 ? (*/}\n        {/*    <p className=\"withdraw-topnote\">收款账号：{account} (支付宝)</p>*/}\n        {/*) : (*/}\n        {/*    <p className=\"withdraw-topnote\">{status===-1 ? '未绑定邀请码' : (status===0 ? '支付宝账号审核中' : (status===2 ? '审核失败,请重新绑定' : ''))} </p>*/}\n        {/*)}*/}\n        <WingBlank size='lg'>\n          <div className=\"withdraw-view\">\n            <div className=\"content\">\n              <div className=\"inputview\">\n                <InputItem\n                    className=\"input border\"\n                    type = \"number\"\n                    {...getFieldProps('code')}\n                    placeholder={placeholder}\n                ></InputItem>\n                {/*<span>手机号码</span>*/}\n              </div>\n              <button onClick={this.submit.bind(this)}>提交</button>\n            </div>\n          </div>\n        </WingBlank>\n        <LoginView\n          visable = {showLogin}\n          onClose = {this.loginClose.bind(this)}\n          loginSuccess = {this.loginSuccess.bind(this)}\n          loginFail = {this.loginFail.bind(this)}\n        />\n      </div>\n\t\t);\n\t}\n}\n\nexport default createForm()(InviteCode);\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAOC,SAAS,MAAM,4BAA4B;AAClD,SAASC,UAAU,QAAQ,SAAS;AACpC;AACA;AACA,OAAO,cAAc;AACrB,OAAOC,IAAI,MAAM,mBAAmB;AACpC,SAAQC,QAAQ,EAAEC,SAAS,QAAO,uBAAuB;AACzD,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAOC,WAAW,MAAM,4BAA4B;AACpD,OAAOC,UAAU,MAAM,6BAA6B;AACpD,MAAMC,UAAU,SAAST,KAAK,CAACU,SAAS;EACtCC,WAAW,CAACC,KAAK,EAAC;IAChB,KAAK,CAACA,KAAK,CAAC;IAAC,KAmDfC,KAAK,GAAIC,OAAO,IAAG;MACjB,OAAMD,KAAK,CAAC,EAAE,EAAEC,OAAO,EAAC,CAAC;QACvBC,IAAI,EAAE;MACR,CAAC,CAAC,CAAC;IACL,CAAC;IAAA,KAIDC,MAAM,GAAG,MAAM;MACb,IAAG,CAACb,IAAI,CAACc,OAAO,EAAE,EAAE;QAClB,IAAI,CAACC,QAAQ,CAAC;UACZC,SAAS,EAAE;QACb,CAAC,CAAC;QACF;MACF;MAEA,IAAI,CAACP,KAAK,CAACQ,IAAI,CAACC,cAAc,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAK;QAC/C,IAAI,CAACC,UAAU,CAACD,KAAK,CAACE,IAAI,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC;IArEC,IAAI,CAACC,KAAK,GAAG;MACXC,OAAO,EAAE,MAAM;MACfR,SAAS,EAAE,KAAK;MAChBS,OAAO,EAAE,CAAC;MACVC,aAAa,EAAE,CAAC;MAChBC,IAAI,EAAE,CAAC;MACPC,UAAU,EAAE,CAAC;MACbC,aAAa,EAAE,CAAC;MAChBC,QAAQ,EAAE,KAAK;MACfC,OAAO,EAAE,EAAE,CAAC;IACd,CAAC;EACH;;EACAC,iBAAiB,GAAE;IACjB;IACA,IAAI,CAACC,UAAU,EAAE;EACnB;EACAA,UAAU,GAAG;IACX,IAAG,CAACjC,IAAI,CAACc,OAAO,EAAE,EAAE;MAClB,IAAI,CAACC,QAAQ,CAAC;QACZC,SAAS,EAAE;MACb,CAAC,CAAC;MACF;IACF,CAAC,MAAM;MACL,IAAI,CAACkB,OAAO,EAAE;IAChB;EACF;EACAA,OAAO,GAAG;IACR,OAAMC,OAAO,EAAE;IACflC,QAAQ,CAACE,GAAG,CAACiC,cAAc,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAG;MACvC,IAAI,CAACvB,QAAQ,CAAC;QACZU,OAAO,EAAEa,GAAG,CAACC,IAAI,CAACd,OAAO;QACzBC,aAAa,EAAEY,GAAG,CAACC,IAAI,CAACb,aAAa;QACrCC,IAAI,EAAEW,GAAG,CAACC,IAAI,CAACZ,IAAI;QACnBC,UAAU,EAAEU,GAAG,CAACC,IAAI,CAACX,UAAU;QAC/BC,aAAa,EAAES,GAAG,CAACC,IAAI,CAACV,aAAa;QACrCE,OAAO,EAAEO,GAAG,CAACC,IAAI,CAACR,OAAO;QACzBS,MAAM,EAAEF,GAAG,CAACC,IAAI,CAACC;MACnB,CAAC,CAAC;MACF,OAAMC,IAAI,EAAE;IACd,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;MAChB,OAAMF,IAAI,EAAE;MACV,IAAGE,GAAG,CAACrB,IAAI,KAAK,GAAG,EAAE;QACjB,IAAI,CAACP,QAAQ,CAAC;UACVC,SAAS,EAAE;QACf,CAAC,CAAC;MACN,CAAC,MAAM;QACH,IAAI,CAACN,KAAK,CAACiC,GAAG,CAAChC,OAAO,CAAC;MAC3B;IACJ,CAAC,CAAC;EACJ;EAMAiC,MAAM,GAAG;IACP,OAAMC,IAAI,CAAC,QAAQ,CAAC;EACtB;EAaAxB,UAAU,CAACC,IAAI,EAAE;IACfpB,SAAS,CAACC,GAAG,CAACkB,UAAU,EAAE;MACxBC,IAAI,EAAEA;IACR,CAAC,CAAC,CAACe,IAAI,CAAEC,GAAG,IAAK;MACf,IAAI,CAAC5B,KAAK,CAAC,eAAe,CAAC;MAC3B;MACA,IAAI,CAACD,KAAK,CAACQ,IAAI,CAAC6B,WAAW,EAAE;IAC/B,CAAC,CAAC,CAACJ,KAAK,CAAEC,GAAG,IAAK;MAChB,IAAI,CAACjC,KAAK,CAACiC,GAAG,CAAChC,OAAO,CAAC;IACzB,CAAC,CAAC;EACJ;EACAoC,UAAU,GAAG;IACX,IAAI,CAAChC,QAAQ,CAAC;MACZC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ;EACAgC,YAAY,CAACC,IAAI,EAAE;IACjB,IAAI,CAAClC,QAAQ,CAAC;MACZC,SAAS,EAAE;IACb,CAAC,CAAC;IACF,IAAI,CAACkB,OAAO,EAAE;EAChB;EAEAgB,SAAS,CAACP,GAAG,EAAC,CAEd;EACAQ,gBAAgB,GAAG;IACjB,IAAI,CAACpC,QAAQ,CAAC;MACZe,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;EACAsB,WAAW,GAAG;IACZ,IAAI,CAACrC,QAAQ,CAAC;MACZe,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;EACDuB,MAAM,GAAE;IACL,MAAM;MAAE7B,OAAO;MAAER,SAAS;MAAEe,OAAO;MAAED,QAAQ;MAAEU;IAAO,CAAC,GAAG,IAAI,CAACjB,KAAK;IACpE,MAAM;MAAE+B;IAAc,CAAC,GAAG,IAAI,CAAC7C,KAAK,CAACQ,IAAI;IACzC,MAAMsC,WAAW,GAAG,YAAY;IAClC,oBACI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBAgCE;MAAW,IAAI,EAAC,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBAClB;MAAK,SAAS,EAAC,eAAe;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBAC5B;MAAK,SAAS,EAAC,SAAS;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACtB;MAAK,SAAS,EAAC,WAAW;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACxB;MACI,SAAS,EAAC,cAAc;MACxB,IAAI,EAAG;IAAQ,GACXD,aAAa,CAAC,MAAM,CAAC;MACzB,WAAW,EAAEC,WAAY;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAChB,CAET,eACN;MAAQ,OAAO,EAAE,IAAI,CAAC1C,MAAM,CAAC2C,IAAI,CAAC,IAAI,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,kBAAY,CAChD,CACF,CACI,eACZ,oBAAC,SAAS;MACR,OAAO,EAAIxC,SAAU;MACrB,OAAO,EAAI,IAAI,CAAC+B,UAAU,CAACS,IAAI,CAAC,IAAI,CAAE;MACtC,YAAY,EAAI,IAAI,CAACR,YAAY,CAACQ,IAAI,CAAC,IAAI,CAAE;MAC7C,SAAS,EAAI,IAAI,CAACN,SAAS,CAACM,IAAI,CAAC,IAAI,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EACvC,CACE;EAEX;AACD;AAEA,eAAezD,UAAU,EAAE,CAACO,UAAU,CAAC"},"metadata":{},"sourceType":"module"}