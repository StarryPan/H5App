{"ast":null,"code":"import\"antd-mobile/es/wing-blank/style\";import _WingBlank from\"antd-mobile/es/wing-blank\";import\"antd-mobile/es/flex/style\";import _Flex from\"antd-mobile/es/flex\";import\"antd-mobile/es/modal/style\";import _Modal from\"antd-mobile/es/modal\";import _classCallCheck from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * @createdAt 2021-01-17\n * @file 排行榜\n */import React from'react';import'./style.less';import API from'../../service/api';import{getFetch}from'../../service/request';import{openURL}from\"../../common/bridge\";var RankingMale=/*#__PURE__*/function(_React$Component){_inherits(RankingMale,_React$Component);var _super=_createSuper(RankingMale);function RankingMale(props){var _this;_classCallCheck(this,RankingMale);_this=_super.call(this,props);_this.alert=function(message){_Modal.alert('',message,[{text:'确定'}]);};_this.state={activeTab:1,today:[],yesterday:[]};return _this;}_createClass(RankingMale,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"getData\",value:function getData(){var _this2=this;getFetch(API.rankIndex,{type:'MALE'}).then(function(res){_this2.setState({today:res.today,yesterday:res.yesterday});console.log(_this2.state.today);}).catch(function(err){});}},{key:\"onBack\",value:function onBack(){this.props.history.goBack();}},{key:\"changeTab\",value:function changeTab(tab){var _this3=this;if(tab===this.state.activeTab)return;this.setState({activeTab:tab},function(){_this3.getData();});}},{key:\"openUserInfo\",value:function openUserInfo(uid){// openURL(\"r_userinfo?uid=\"+uid)\n}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,activeTab=_this$state.activeTab,today=_this$state.today,yesterday=_this$state.yesterday;var topone=activeTab===1?today[0]:yesterday[0],toptwo=activeTab===1?today[1]:yesterday[1],topthree=activeTab===1?today[2]:yesterday[2];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"ranking-view\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tab\"},/*#__PURE__*/React.createElement(\"div\",{className:\"view\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){_this4.changeTab(1);},className:activeTab===1?'left active':'left'},\"\\u4ECA\\u65E5\\u5BCC\\u8C6A\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){_this4.changeTab(2);},className:activeTab===2?'right active':'right'},\"\\u6628\\u65E5\\u5BCC\\u8C6A\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"topview\"},topone&&/*#__PURE__*/React.createElement(\"div\",{className:\"top1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"imgview\"},/*#__PURE__*/React.createElement(\"img\",{src:topone.head_image,alt:\"\",onClick:function onClick(){_this4.openUserInfo(topone.uid);}})),/*#__PURE__*/React.createElement(\"p\",{className:\"name\"},topone.nick_name),/*#__PURE__*/React.createElement(\"p\",{className:\"desc\"},\"\\u8D21\\u732E\",topone.score)),toptwo&&/*#__PURE__*/React.createElement(\"div\",{className:\"top2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"imgview\"},/*#__PURE__*/React.createElement(\"img\",{src:toptwo.head_image,alt:\"\",onClick:function onClick(){_this4.openUserInfo(toptwo.uid);}})),/*#__PURE__*/React.createElement(\"p\",{className:\"name\"},toptwo.nick_name),/*#__PURE__*/React.createElement(\"p\",{className:\"desc\"},\"\\u8D21\\u732E\",toptwo.score)),topthree&&/*#__PURE__*/React.createElement(\"div\",{className:\"top3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"imgview\"},/*#__PURE__*/React.createElement(\"img\",{src:topthree.head_image,alt:\"\",onClick:function onClick(){_this4.openUserInfo(topthree.uid);}})),/*#__PURE__*/React.createElement(\"p\",{className:\"name\"},topthree.nick_name),/*#__PURE__*/React.createElement(\"p\",{className:\"desc\"},\"\\u8D21\\u732E\",topthree.score))),/*#__PURE__*/React.createElement(_WingBlank,{size:\"lg\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list\"},(activeTab===1?today:yesterday).map(function(item,index){if(index<3)return null;return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(_Flex,null,/*#__PURE__*/React.createElement(\"span\",{className:\"pm\"},index+1),/*#__PURE__*/React.createElement(\"img\",{src:item.head_image,alt:\"\",onClick:function onClick(){_this4.openUserInfo(item.uid);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"name\"},item.nick_name),/*#__PURE__*/React.createElement(_Flex.Item,null,/*#__PURE__*/React.createElement(\"div\",{className:\"tr\"},\"\\u8D21\\u732E\",item.score))));})))));}}]);return RankingMale;}(React.Component);export{RankingMale as default};","map":null,"metadata":{},"sourceType":"module"}