{"ast":null,"code":"import\"antd-mobile/es/wing-blank/style\";import _WingBlank from\"antd-mobile/es/wing-blank\";import\"antd-mobile/es/flex/style\";import _Flex from\"antd-mobile/es/flex\";import\"antd-mobile/es/toast/style\";import _Toast from\"antd-mobile/es/toast\";import\"antd-mobile/es/modal/style\";import _Modal from\"antd-mobile/es/modal\";import _classCallCheck from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"antd-mobile/es/list/style\";import _List from\"antd-mobile/es/list\";/**\n * @file 邀请任务页面\n */import React from'react';import'./style.less';import StarImg from'../../images/star.png';import YunImg from'../../images/yun.png';import BannerImg from'../../images/earnings/banner.png';import API from'../../service/api';import{getFetch,postFetch}from'../../service/request';var Item=_List.Item;var Brief=Item.Brief;var WalletDetail=/*#__PURE__*/function(_React$Component){_inherits(WalletDetail,_React$Component);var _super=_createSuper(WalletDetail);function WalletDetail(props){var _this;_classCallCheck(this,WalletDetail);_this=_super.call(this,props);_this.alert=function(message){_Modal.alert('',message,[{text:'确定'}]);};_this.state={showTopHeader:false,taskList:[],earnings:{}};return _this;}_createClass(WalletDetail,[{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener('scroll',this.onScroll.bind(this));this.getData();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('scroll',this.onScroll.bind(this));}},{key:\"onScroll\",value:function onScroll(){var scrollTop=document.documentElement.scrollTop;var showTopHeader=this.state.showTopHeader;if(scrollTop>350){!showTopHeader&&this.setState({showTopHeader:true});}else{showTopHeader&&this.setState({showTopHeader:false});}}},{key:\"onBack\",value:function onBack(){}},{key:\"getData\",value:function getData(){var _this2=this;getFetch(API.getTaskList).then(function(data){_this2.setState({taskList:data.tasks||[],earnings:{gift:data.gift,//钻石\nbalance:data.balance,// 积分\ncash:data.cash,// 金币\ngender:data.gender}});}).catch(function(err){});}},{key:\"rewardTask\",value:function rewardTask(data){var _this3=this;postFetch(API.rewardTask,{task_id:data.id}).then(function(res){_Toast.show(\"领取成功\");_this3.getData();}).catch(function(err){_this3.alert(err.message||'网络不给力，请稍后再试');});}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,taskList=_this$state.taskList,earnings=_this$state.earnings,balance=_this$state.balance,gift=_this$state.gift;console.log(this.state);return/*#__PURE__*/React.createElement(\"div\",{className:\"earnings-view\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head\"},/*#__PURE__*/React.createElement(\"img\",{src:BannerImg,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(_WingBlank,{size:\"lg\"},earnings.gender==='FEMALE'&&/*#__PURE__*/React.createElement(\"div\",{className:\"info\"},/*#__PURE__*/React.createElement(_Flex,null,/*#__PURE__*/React.createElement(_Flex.Item,null,/*#__PURE__*/React.createElement(\"div\",{className:\"item br\"},/*#__PURE__*/React.createElement(\"p\",{className:\"num\"},earnings.balance),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:StarImg,alt:\"\"}),\"\\u79EF\\u5206\"))),/*#__PURE__*/React.createElement(_Flex.Item,null,/*#__PURE__*/React.createElement(\"div\",{className:\"item\"},/*#__PURE__*/React.createElement(\"p\",{className:\"num\"},earnings.gift),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:YunImg,alt:\"\"}),\"\\u94BB\\u77F3\"))))),/*#__PURE__*/React.createElement(_List,{className:\"task-list\"},taskList.map(function(item,index){return/*#__PURE__*/React.createElement(Item,{key:index},item.title,/*#__PURE__*/React.createElement(\"span\",{className:\"tag\"},\"\\uFF08+\",item.num,/*#__PURE__*/React.createElement(\"img\",{src:YunImg,alt:\"\"}),\"\\uFF09\"),/*#__PURE__*/React.createElement(Brief,null,item.subtitle),item.status===-1&&/*#__PURE__*/React.createElement(\"div\",{className:\"btn\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u53BB\\u5B8C\\u6210\")),item.status===0&&/*#__PURE__*/React.createElement(\"div\",{className:\"btn success\",onClick:function onClick(){return _this4.rewardTask(item);}},/*#__PURE__*/React.createElement(\"span\",null,\"\\u9886\\u5956\\u52B1\")),item.status===1&&/*#__PURE__*/React.createElement(\"div\",{className:\"btn finish\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u5DF2\\u5B8C\\u6210\")));})))));}}]);return WalletDetail;}(React.Component);export{WalletDetail as default};","map":null,"metadata":{},"sourceType":"module"}