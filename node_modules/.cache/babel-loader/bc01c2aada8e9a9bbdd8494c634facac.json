{"ast":null,"code":"import \"antd-mobile/es/wing-blank/style\";\nimport _WingBlank from \"antd-mobile/es/wing-blank\";\nimport \"antd-mobile/es/flex/style\";\nimport _Flex from \"antd-mobile/es/flex\";\nimport \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport \"antd-mobile/es/modal/style\";\nimport _Modal from \"antd-mobile/es/modal\";\nimport \"antd-mobile/es/list/style\";\nimport _List from \"antd-mobile/es/list\";\nvar _jsxFileName = \"/usr/local/var/www/orangeweb/src/pages/earnings/index.js\";\n/**\n * @file 邀请任务页面\n */\nimport React from 'react';\nimport './style.less';\nimport StarImg from '../../images/star.png';\nimport YunImg from '../../images/yun.png';\nimport BannerImg from '../../images/earnings/banner.png';\nimport API from '../../service/api';\nimport { getFetch, postFetch } from '../../service/request';\nconst Item = _List.Item;\nconst Brief = Item.Brief;\nexport default class WalletDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.alert = message => {\n      _Modal.alert('', message, [{\n        text: '确定'\n      }]);\n    };\n    this.state = {\n      showTopHeader: false,\n      taskList: [],\n      earnings: {}\n    };\n  }\n  componentDidMount() {\n    window.addEventListener('scroll', this.onScroll.bind(this));\n    this.getData();\n  }\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.onScroll.bind(this));\n  }\n  onScroll() {\n    const scrollTop = document.documentElement.scrollTop;\n    const {\n      showTopHeader\n    } = this.state;\n    if (scrollTop > 350) {\n      !showTopHeader && this.setState({\n        showTopHeader: true\n      });\n    } else {\n      showTopHeader && this.setState({\n        showTopHeader: false\n      });\n    }\n  }\n  onBack() {}\n  getData() {\n    getFetch(API.getTaskList).then(data => {\n      this.setState({\n        taskList: data.tasks || [],\n        earnings: {\n          gift: data.gift,\n          //钻石\n          balance: data.balance,\n          // 积分\n          cash: data.cash,\n          // 金币\n          gender: data.gender\n        }\n      });\n    }).catch(err => {});\n  }\n  rewardTask(data) {\n    postFetch(API.rewardTask, {\n      task_id: data.id\n    }).then(res => {\n      _Toast.show(\"领取成功\");\n      this.getData();\n    }).catch(err => {\n      this.alert(err.message || '网络不给力，请稍后再试');\n    });\n  }\n  render() {\n    const {\n      taskList,\n      earnings,\n      balance,\n      gift\n    } = this.state;\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"earnings-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: BannerImg,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(_WingBlank, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }, earnings.gender === 'FEMALE' && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(_Flex, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Flex.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item br\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"num\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 23\n      }\n    }, earnings.balance), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: StarImg,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }), \"\\u79EF\\u5206\"))), /*#__PURE__*/React.createElement(_Flex.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"num\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 23\n      }\n    }, earnings.gift), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: YunImg,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }), \"\\u94BB\\u77F3\"))))), /*#__PURE__*/React.createElement(_List, {\n      className: \"task-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, taskList.map((item, index) => {\n      return /*#__PURE__*/React.createElement(Item, {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 19\n        }\n      }, item.title, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"tag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 33\n        }\n      }, \"\\uFF08+\", item.num, /*#__PURE__*/React.createElement(\"img\", {\n        src: YunImg,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 67\n        }\n      }), \"\\uFF09\"), /*#__PURE__*/React.createElement(Brief, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, item.subtitle), item.status === -1 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }\n      }, \"\\u53BB\\u5B8C\\u6210\")), item.status === 0 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn success\",\n        onClick: () => this.rewardTask(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }\n      }, \"\\u9886\\u5956\\u52B1\")), item.status === 1 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn finish\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }\n      }, \"\\u5DF2\\u5B8C\\u6210\")));\n    })))));\n  }\n}","map":{"version":3,"names":["React","StarImg","YunImg","BannerImg","API","getFetch","postFetch","Item","Brief","WalletDetail","Component","constructor","props","alert","message","text","state","showTopHeader","taskList","earnings","componentDidMount","window","addEventListener","onScroll","bind","getData","componentWillUnmount","removeEventListener","scrollTop","document","documentElement","setState","onBack","getTaskList","then","data","tasks","gift","balance","cash","gender","catch","err","rewardTask","task_id","id","res","show","render","console","log","map","item","index","title","num","subtitle","status"],"sources":["/usr/local/var/www/orangeweb/src/pages/earnings/index.js"],"sourcesContent":["/**\n * @file 邀请任务页面\n */\nimport React from 'react'\nimport {Flex, List, WingBlank, Modal, Toast } from 'antd-mobile'\nimport './style.less'\nimport StarImg from '../../images/star.png'\nimport YunImg from '../../images/yun.png'\nimport BannerImg from '../../images/earnings/banner.png'\n\nimport API from '../../service/api'\nimport {getFetch, postFetch} from '../../service/request'\n\nconst Item = List.Item\nconst Brief = Item.Brief\n\n\nexport default class WalletDetail extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      showTopHeader: false,\n      taskList: [],\n      earnings: {\n\n      }\n    }\n  }\n  componentDidMount(){\n    window.addEventListener('scroll', this.onScroll.bind(this))\n    this.getData()\n  }\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.onScroll.bind(this))\n  }\n  onScroll() {\n    const scrollTop = document.documentElement.scrollTop\n    const { showTopHeader } = this.state\n    if (scrollTop > 350) {\n      !showTopHeader && this.setState({\n        showTopHeader: true\n      })\n    } else {\n      showTopHeader && this.setState({\n        showTopHeader: false\n      })\n    }\n  }\n  onBack(){\n\n  }\n  getData() {\n    getFetch(API.getTaskList).then((data) => {\n      this.setState({\n        taskList: data.tasks || [],\n        earnings: {\n          gift: data.gift, //钻石\n          balance: data.balance, // 积分\n          cash: data.cash, // 金币\n          gender: data.gender\n        }\n      })\n    }).catch((err) => {\n\n    })\n  }\n  rewardTask(data) {\n    postFetch(API.rewardTask, {\n      task_id: data.id,\n    }).then((res) => {\n      Toast.show(\"领取成功\")\n      this.getData()\n    }).catch((err) => {\n      this.alert(err.message || '网络不给力，请稍后再试')\n    })\n  }\n  alert = (message)=>{\n    Modal.alert('', message,[{\n      text: '确定'\n    }])\n  }\n  render() {\n    const { taskList, earnings, balance, gift } = this.state\n      console.log(this.state)\n    return (\n      <div className=\"earnings-view\">\n        {/* {showTopHeader && (\n          <HeaderView\n            title={ earnings.gender === 'MALE' ? \"任务列表\" : \"收益明细\"}\n            onBack = {this.onBack.bind(this)}\n            fixed\n          />\n        )} */}\n        <div className=\"head\">\n          <img src={BannerImg} alt='' />\n        </div>\n        <div className=\"content\">\n          <WingBlank size=\"lg\">\n            {earnings.gender === 'FEMALE' && (\n              <div className=\"info\">\n                <Flex>\n                  <Flex.Item>\n                    <div className=\"item br\">\n                      <p className=\"num\">{earnings.balance}</p>\n                      <div>\n                        <img src={StarImg} alt=''/>积分\n                      </div>\n                    </div>\n                  </Flex.Item>\n                  <Flex.Item>\n                    <div className=\"item\">\n                      <p className=\"num\">{earnings.gift}</p>\n                      <div>\n                        <img src={YunImg} alt='' />钻石\n                      </div>\n                    </div>\n                  </Flex.Item>\n                </Flex>\n                {/*<div className=\"tc\">*/}\n                  {/*<button className=\"tx\">立即提现</button>*/}\n                {/*</div>*/}\n              </div>\n            )}\n            <List className=\"task-list\">\n              {taskList.map((item, index) => {\n                return (\n                  <Item key={index}>\n                    {item.title}<span className=\"tag\">（+{item.num}<img src={YunImg} alt='' />）</span>\n                    <Brief>{item.subtitle}</Brief>\n                    {item.status === -1 && (\n                      <div className=\"btn\">\n                        <span>去完成</span>\n                      </div>\n                    )}\n                    {item.status === 0 && (\n                      <div className=\"btn success\" onClick={() => this.rewardTask(item)}>\n                        <span>领奖励</span>\n                      </div>\n                    )}\n                    {item.status === 1 && (\n                      <div className=\"btn finish\">\n                        <span>已完成</span>\n                      </div>\n                    )}\n                  </Item>\n                )\n              })}\n            </List>\n          </WingBlank>\n        </div>\n      </div>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}