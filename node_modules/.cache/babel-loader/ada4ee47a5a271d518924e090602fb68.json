{"ast":null,"code":"import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport closest from '../_util/closest';\nimport Modal from './Modal';\nexport default function operation() {\n  var actions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [{\n    text: '确定'\n  }];\n  var platform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'ios';\n  var closed = false;\n  var prefixCls = 'am-modal';\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n  function close() {\n    ReactDOM.unmountComponentAtNode(div);\n    if (div && div.parentNode) {\n      div.parentNode.removeChild(div);\n    }\n  }\n  var footer = actions.map(function (button) {\n    // tslint:disable-next-line:only-arrow-functions\n    var orginPress = button.onPress || function () {};\n    button.onPress = function () {\n      if (closed) {\n        return;\n      }\n      var res = orginPress();\n      if (res && res.then) {\n        res.then(function () {\n          closed = true;\n          close();\n        })['catch'](function () {});\n      } else {\n        closed = true;\n        close();\n      }\n    };\n    return button;\n  });\n  function onWrapTouchStart(e) {\n    if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n      return;\n    }\n    var pNode = closest(e.target, '.am-modal-footer');\n    if (!pNode) {\n      e.preventDefault();\n    }\n  }\n  ReactDOM.render(React.createElement(Modal, {\n    visible: true,\n    operation: true,\n    transparent: true,\n    prefixCls: prefixCls,\n    transitionName: 'am-zoom',\n    closable: false,\n    maskClosable: true,\n    onClose: close,\n    footer: footer,\n    maskTransitionName: 'am-fade',\n    className: 'am-modal-operation',\n    platform: platform,\n    wrapProps: {\n      onTouchStart: onWrapTouchStart\n    }\n  }), div);\n  return {\n    close: close\n  };\n}","map":{"version":3,"names":["React","ReactDOM","closest","Modal","operation","actions","arguments","length","undefined","text","platform","closed","prefixCls","div","document","createElement","body","appendChild","close","unmountComponentAtNode","parentNode","removeChild","footer","map","button","orginPress","onPress","res","then","onWrapTouchStart","e","test","navigator","userAgent","pNode","target","preventDefault","render","visible","transparent","transitionName","closable","maskClosable","onClose","maskTransitionName","className","wrapProps","onTouchStart"],"sources":["/usr/local/var/www/orangeweb/node_modules/antd-mobile/es/modal/operation.js"],"sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport closest from '../_util/closest';\nimport Modal from './Modal';\nexport default function operation() {\n    var actions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [{ text: '确定' }];\n    var platform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'ios';\n\n    var closed = false;\n    var prefixCls = 'am-modal';\n    var div = document.createElement('div');\n    document.body.appendChild(div);\n    function close() {\n        ReactDOM.unmountComponentAtNode(div);\n        if (div && div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n    }\n    var footer = actions.map(function (button) {\n        // tslint:disable-next-line:only-arrow-functions\n        var orginPress = button.onPress || function () {};\n        button.onPress = function () {\n            if (closed) {\n                return;\n            }\n            var res = orginPress();\n            if (res && res.then) {\n                res.then(function () {\n                    closed = true;\n                    close();\n                })['catch'](function () {});\n            } else {\n                closed = true;\n                close();\n            }\n        };\n        return button;\n    });\n    function onWrapTouchStart(e) {\n        if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n            return;\n        }\n        var pNode = closest(e.target, '.am-modal-footer');\n        if (!pNode) {\n            e.preventDefault();\n        }\n    }\n    ReactDOM.render(React.createElement(Modal, { visible: true, operation: true, transparent: true, prefixCls: prefixCls, transitionName: 'am-zoom', closable: false, maskClosable: true, onClose: close, footer: footer, maskTransitionName: 'am-fade', className: 'am-modal-operation', platform: platform, wrapProps: { onTouchStart: onWrapTouchStart } }), div);\n    return {\n        close: close\n    };\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAO,KAAKC,QAAQ,MAAM,WAAW;AACrC,OAAOC,OAAO,MAAM,kBAAkB;AACtC,OAAOC,KAAK,MAAM,SAAS;AAC3B,eAAe,SAASC,SAAS,GAAG;EAChC,IAAIC,OAAO,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;IAAEG,IAAI,EAAE;EAAK,CAAC,CAAC;EAClG,IAAIC,QAAQ,GAAGJ,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;EAExF,IAAIK,MAAM,GAAG,KAAK;EAClB,IAAIC,SAAS,GAAG,UAAU;EAC1B,IAAIC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACvCD,QAAQ,CAACE,IAAI,CAACC,WAAW,CAACJ,GAAG,CAAC;EAC9B,SAASK,KAAK,GAAG;IACbjB,QAAQ,CAACkB,sBAAsB,CAACN,GAAG,CAAC;IACpC,IAAIA,GAAG,IAAIA,GAAG,CAACO,UAAU,EAAE;MACvBP,GAAG,CAACO,UAAU,CAACC,WAAW,CAACR,GAAG,CAAC;IACnC;EACJ;EACA,IAAIS,MAAM,GAAGjB,OAAO,CAACkB,GAAG,CAAC,UAAUC,MAAM,EAAE;IACvC;IACA,IAAIC,UAAU,GAAGD,MAAM,CAACE,OAAO,IAAI,YAAY,CAAC,CAAC;IACjDF,MAAM,CAACE,OAAO,GAAG,YAAY;MACzB,IAAIf,MAAM,EAAE;QACR;MACJ;MACA,IAAIgB,GAAG,GAAGF,UAAU,EAAE;MACtB,IAAIE,GAAG,IAAIA,GAAG,CAACC,IAAI,EAAE;QACjBD,GAAG,CAACC,IAAI,CAAC,YAAY;UACjBjB,MAAM,GAAG,IAAI;UACbO,KAAK,EAAE;QACX,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;MAC/B,CAAC,MAAM;QACHP,MAAM,GAAG,IAAI;QACbO,KAAK,EAAE;MACX;IACJ,CAAC;IACD,OAAOM,MAAM;EACjB,CAAC,CAAC;EACF,SAASK,gBAAgB,CAACC,CAAC,EAAE;IACzB,IAAI,CAAC,mBAAmB,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,EAAE;MAChD;IACJ;IACA,IAAIC,KAAK,GAAGhC,OAAO,CAAC4B,CAAC,CAACK,MAAM,EAAE,kBAAkB,CAAC;IACjD,IAAI,CAACD,KAAK,EAAE;MACRJ,CAAC,CAACM,cAAc,EAAE;IACtB;EACJ;EACAnC,QAAQ,CAACoC,MAAM,CAACrC,KAAK,CAACe,aAAa,CAACZ,KAAK,EAAE;IAAEmC,OAAO,EAAE,IAAI;IAAElC,SAAS,EAAE,IAAI;IAAEmC,WAAW,EAAE,IAAI;IAAE3B,SAAS,EAAEA,SAAS;IAAE4B,cAAc,EAAE,SAAS;IAAEC,QAAQ,EAAE,KAAK;IAAEC,YAAY,EAAE,IAAI;IAAEC,OAAO,EAAEzB,KAAK;IAAEI,MAAM,EAAEA,MAAM;IAAEsB,kBAAkB,EAAE,SAAS;IAAEC,SAAS,EAAE,oBAAoB;IAAEnC,QAAQ,EAAEA,QAAQ;IAAEoC,SAAS,EAAE;MAAEC,YAAY,EAAElB;IAAiB;EAAE,CAAC,CAAC,EAAEhB,GAAG,CAAC;EAChW,OAAO;IACHK,KAAK,EAAEA;EACX,CAAC;AACL"},"metadata":{},"sourceType":"module"}