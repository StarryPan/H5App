{"ast":null,"code":"import\"antd-mobile/es/wing-blank/style\";import _WingBlank from\"antd-mobile/es/wing-blank\";import\"antd-mobile/es/input-item/style\";import _InputItem from\"antd-mobile/es/input-item\";import\"antd-mobile/es/flex/style\";import _Flex from\"antd-mobile/es/flex\";import\"antd-mobile/es/modal/style\";import _Modal from\"antd-mobile/es/modal\";import _classCallCheck from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/local/var/www/orangeweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * @file 帮助中心页面\n */import React from'react';import LoginView from'../../components/LoginView';import{createForm}from'rc-form';// import { getFetch, postFetch } from '../../service/request'\n// import HeaderView from '../../components/HeaderView'\nimport'./style.less';import Util from'../../common/util';import{getFetch,postFetch}from\"../../service/request\";import API from\"../../service/api\";import HelpIconImg from'../../images/help_icon.png';var Withdraw=/*#__PURE__*/function(_React$Component){_inherits(Withdraw,_React$Component);var _super=_createSuper(Withdraw);function Withdraw(props){var _this;_classCallCheck(this,Withdraw);_this=_super.call(this,props);_this.alert=function(message){_Modal.alert('',message,[{text:'确定'}]);};_this.submit=function(){// if(!Util.isLogin()) {\n//   this.setState({\n//     showLogin: true\n//   })\n//   return;\n// }\n_this.props.form.validateFields(function(error,value){_this.exchange(value.money);});};_this.changetab=function(type){_this.setState({tabType:type});};_this.state={tabType:'rainbow',showLogin:false,balance:0,balance_money:0,gift:0,gift_money:0,showNote:false,withdrawAccount:'提现账号',//提现账号\nexchange_cash:0};return _this;}_createClass(Withdraw,[{key:\"componentDidMount\",value:function componentDidMount(){// Util.removeUserinfo()\nthis.checkLogin();}},{key:\"checkLogin\",value:function checkLogin(){if(!Util.isLogin()){this.setState({showLogin:true});return;}else{this.getData();}}},{key:\"getData\",value:function getData(){var _this2=this;getFetch(API.withdrawalInfo).then(function(res){_this2.setState({balance:res.info.balance,balance_money:res.info.balance_money,gift:res.info.gift,gift_money:res.info.gift_money,exchange_cash:res.info.exchange_cash});}).catch(function(err){_this2.alert(err.message);});}},{key:\"onBack\",value:function onBack(){}},{key:\"exchange\",value:function exchange(num){var _this3=this;postFetch(API.exchange,{balance:num}).then(function(res){_this3.alert(\"兑换成功\");_this3.getData();_this3.props.form.resetFields();}).catch(function(err){_this3.alert(err.message);});}},{key:\"withdrawal\",value:function withdrawal(money){var _this4=this;var type=-1;if(this.state.tabType==='star'){type=0;}else if(this.state.tabType==='cloud'){type=1;}else{return;}postFetch(API.withdrawal,{money:money,type:type}).then(function(res){_this4.alert(\"提现成功\");_this4.getData();_this4.props.form.resetFields();}).catch(function(err){if(err.code===401){_this4.setState({showLogin:true});}else{_this4.alert(err.message);}});}},{key:\"gotoWalletDetail\",value:function gotoWalletDetail(){}},{key:\"loginClose\",value:function loginClose(){this.setState({showLogin:false});}},{key:\"loginSuccess\",value:function loginSuccess(data){this.setState({showLogin:false});this.getData();}},{key:\"loginFail\",value:function loginFail(err){}},{key:\"showWithdrawNote\",value:function showWithdrawNote(){this.setState({showNote:true});}},{key:\"onCloseNote\",value:function onCloseNote(){this.setState({showNote:false});}},{key:\"render\",value:function render(){var _this$state=this.state,tabType=_this$state.tabType,showLogin=_this$state.showLogin,withdrawAccount=_this$state.withdrawAccount,showNote=_this$state.showNote,exchange_cash=_this$state.exchange_cash;var getFieldProps=this.props.form.getFieldProps;var placeholder=tabType!=='rainbow'?'请输入为50整数倍的提现金额':'请输入积分的数量';return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(_WingBlank,{size:\"lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdraw-view\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dui\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u5151\\u6362\\u91D1\\u5E01\")),/*#__PURE__*/React.createElement(_Flex,{className:\"con\"},/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u79EF\\u5206\\u603B\\u989D\"),/*#__PURE__*/React.createElement(\"h3\",null,this.state.balance)),/*#__PURE__*/React.createElement(_Flex.Item,{className:\"tc\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u53EF\\u5151\\u6362(\\u91D1\\u5E01)\"),/*#__PURE__*/React.createElement(\"h3\",null,this.state.exchange_cash)))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inputview\"},/*#__PURE__*/React.createElement(_InputItem,Object.assign({className:\"input border\",type:\"number\"},getFieldProps('money'),{placeholder:placeholder})),/*#__PURE__*/React.createElement(\"span\",null,\"\\u79EF\\u5206\")),/*#__PURE__*/React.createElement(\"div\",{className:\"w-suan\"},\"\\u53EF\\u5151\\u6362\",/*#__PURE__*/React.createElement(\"span\",null,this.state.exchange_cash),\"\\u91D1\\u5E01\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.submit.bind(this)},\"\\u7ACB\\u5373\\u5151\\u6362\"),/*#__PURE__*/React.createElement(\"p\",{className:\"note2\"},\"\\u6BCF\\u65E5\\u6700\\u591A\\u53EF\\u5151\\u636250\\u4E07\\u79EF\\u5206\")))),/*#__PURE__*/React.createElement(LoginView,{visable:showLogin,onClose:this.loginClose.bind(this),loginSuccess:this.loginSuccess.bind(this),loginFail:this.loginFail.bind(this)}),/*#__PURE__*/React.createElement(_Modal,{popup:true,className:\"q-modal\",visible:showNote,onClose:this.onCloseNote.bind(this),animationType:\"slide-up\",afterClose:function afterClose(){}},/*#__PURE__*/React.createElement(\"div\",{className:\"withdraw-noteModal\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u94BB\\u77F3\\u63D0\\u73B0\\u4E0A\\u9650 = \\u79EF\\u5206\\u5DF2\\u63D0\\u73B0\\u91D1\\u989D*50% - \\u94BB\\u77F3\\u5DF2\\u63D0\\u73B0\\u91D1\\u989D\\u3002 (\\u79EF\\u5206\\u5DF2\\u63D0\\u73B00\\u5143\\uFF0C\\u94BB\\u77F3\\u5DF2\\u63D0\\u73B00\\u5143\\uFF0C\\u5F53\\u524D\\u94BB\\u77F3\\u63D0\\u73B0\\u4E0A\\u9650\\u4E3A0\\u5143\\uFF09\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:this.onCloseNote.bind(this)},\"\\u77E5\\u9053\\u4E86\")))));}}]);return Withdraw;}(React.Component);export default createForm()(Withdraw);","map":null,"metadata":{},"sourceType":"module"}